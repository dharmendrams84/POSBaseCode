<?xml version='1.0' ?>
<!--
/* ===========================================================================
* Copyright (c) 2008, 2012, Oracle and/or its affiliates. All rights reserved. 
 * ===========================================================================
 * $Header: rgbustores/applications/pos/src/oracle/retail/stores/pos/services/sale/sale.xml /rgbustores_13.4x_generic_branch/7 2012/02/27 18:16:36 asinton Exp $
 * ===========================================================================
 * NOTES
 * <other useful comments, qualifications, etc.>
 *
 * MODIFIED    (MM/DD/YY)
 *    asinton   02/27/12 - refactored the flow so that items added from scan
 *                         sheet doesn't allow for a hang or mismatched letter.
 *    cgreene   08/10/11 - quickwin - implement dialog for trying to enter
 *                         multiple qty of serialized item
 *    cgreene   07/26/11 - removed tenderauth and giftcard.activation tours and
 *                         financialnetwork interfaces.
 *    asinton   07/22/11 - removed service giftcard.activate and other unused
 *                         letter, laneactions, signals, and shuttles.
 *    blarsen   07/08/11 - Routing reversal tours from tender.tenderauth
 *                         (removed) to new tender.reversal service.
 *    rrkohli   06/08/11 - Quickwin -Add multqty for below items, system needs
 *                         to display ITEM_NOT_ALLOWED_W_MLTY_QTY dialog
 *    jkoppolu  03/30/11 - Fix to not to add customer in case of linking from
 *                         existing matching customers.
 *    jkoppolu  03/02/11 - Added scan sheet station and related
 *                         letters/shuttles
 *    kelesika  12/03/10 - Multiple reversal of gift cards
 *    rrkohli   12/01/10 - fix to handle when same serial number is entered
 *                         more than once
 *    jswan     11/01/10 - Fixed issues with UNDO and CANCEL letters; this
 *                         includes properly canceling transactions when a user
 *                         presses the cancel button in the item inquiry and
 *                         item inquiry sub tours.
 *    rrkohli   10/19/10 - Added fix to show 'enter size screen' in item lookup
 *                         flow
 *    masahu    09/29/10 - New check in sale Tour for Queue Full
 *    asinton   09/14/10 - Fixed timeout issue in giftcard activation.
 *    abhayg    08/13/10 - STOPPING POS TRANSACTION IF REGISTER HDD IS FULL
 *    nkgautam  08/11/10 - added removeitem road in serializeditemstation
 *    abhayg    08/04/10 - TRANSACTION NUMBER IS SKIPPED DUE TO APPLICATION
 *                         TIME OUT
 *    nkgautam  06/21/10 - bill pay changes
 *    cgreene   05/26/10 - convert to oracle packaging
 *    cgreene   04/27/10 - XbranchMerge cgreene_refactor-duplicate-pos-classes
 *                         from st_rgbustores_techissueseatel_generic_branch
 *    cgreene   03/26/10 - move timeout road to common service
 *    cgreene   02/24/10 - added InitRegisterOffline road
 *    vapartha  01/28/10 - Checking in after merge
 *    vapartha  01/27/10 - Added code to handle time out in Add Item screen.
 *    vapartha  01/20/10 - Changed code to avoid poslog miss in case of Timeout
 *    cgreene   01/14/10 - hide the OSK instead of show it
 *    abondala  01/02/10 - Update Header date
 *    cgreene   12/16/09 - show keyboard when arriving at sell or tender screen
 *    nkgautam  12/14/09 - Added return shuttle and new roads in
 *                         SerializedItemStation
 *    acadar    11/13/09 - added road for the Invalid letter
 *    blarsen   10/01/09 - XbranchMerge
 *                         blarsen_bug8848490-user-not-auto-logged-out-after-spec-order
 *                         from rgbustores_13.1x_branch
 *    blarsen   09/09/09 - Added support ExitSpecialOrder letter. This letter
 *                         provides a path out of special orders when a
 *                         transaction is performed. In this case the sale must
 *                         be initialized and register accountability checked.
 *                         This fixes the Lowe's problem where user was not
 *                         automatically logged out after a pickup or a cancel.
 *    cgreene   09/02/09 - changed ModifyItemReturned to tape=REWIND so that
 *                         ItemInquiry performance test does not cause a memory
 *                         leak in the Tape.
 *    cgreene   04/29/09 - configure InitStation to discard tape so that this
 *                         tour does not grow in size and repeated sales are
 *                         performed.
 *    jswan     04/14/09 - Modified to fix conflict between multi quantity
 *                         items and items that have been marked for Pickup or
 *                         Delivery.
 *    mweis     03/23/09 - Forward port of 7280349: House payment and
 *                         identifying the cashier
 *    cgreene   02/04/09 - CompleteSaleStation will now exit a road on letter
 *                         ExitCompleteSale. Road SaleCashDrawerSuccess was not
 *                         even needed.
 *
 * ===========================================================================
 *   $Log:
 *    7    360Commerce 1.6         12/19/2007 7:48:54 AM  Manikandan Chellapan
 *         PAPB FR27 Bulk Checkin - 1
 *    6    360Commerce 1.5         5/4/2006 5:11:49 PM    Brendan W. Farrell
 *         Remove inventory.
 *    5    360Commerce 1.4         1/25/2006 4:11:44 PM   Brett J. Larsen merge
 *          7.1.1 changes (aka. 7.0.3 fixes) into 360Commerce view
 *    4    360Commerce 1.3         12/13/2005 4:42:35 PM  Barry A. Pape
 *         Base-lining of 7.1_LA
 *    3    360Commerce 1.2         3/31/2005 4:29:48 PM   Robert Pearse
 *    2    360Commerce 1.1         3/10/2005 10:24:58 AM  Robert Pearse
 *    1    360Commerce 1.0         2/11/2005 12:14:00 PM  Robert Pearse
 *   $
 *   Revision 1.49.2.1  2005/01/20 21:03:44  bwf
 *   @scr 5126 Handle QueueFull letter inorder to go back to main options screen.
 *
 *   Revision 1.49  2004/09/29 19:47:48  mweis
 *   @scr 7012 Sigh.  Don't put double hyphens in XML comments.
 *
 *   Revision 1.48  2004/09/29 16:30:24  mweis
 *   @scr 7012 Special Order and Inventory integration - canceling the entire order.
 *
 *   Revision 1.47  2004/09/09 16:20:14  mweis
 *   @scr 7012 If needed, prompt for kit components' inventory information.
 *
 *   Revision 1.46  2004/08/23 16:15:57  cdb
 *   @scr 4204 Removed tab characters
 *
 *   Revision 1.45  2004/08/12 14:04:33  rsachdeva
 *   @scr 6791 Transaction Level Send
 *
 *   Revision 1.44  2004/08/05 22:15:02  dcobb
 *   @scr 6655 Remove letter checks from shuttles.
 *   Remove extraneous road.
 *
 *   Revision 1.43  2004/07/29 17:03:25  mweis
 *   @scr 6040 EJ not showing kit header, kit components, nor serialized items.
 *
 *   Revision 1.42  2004/07/21 23:26:19  dcobb
 *   @scr 4302 Correct compiler warnings.
 *   Renamed road that had same name as site..
 *
 *   Revision 1.41  2004/07/13 20:35:31  bwf
 *   @scr 6223 Added failure letter to redeem station.
 *
 *   Revision 1.40  2004/07/09 15:11:22  dcobb
 *   @scr 2009 Password for user ID is not prompted for after an employee logs off POS while in Register Accountability mode.
 *   Logoff letter is now mailed upon successful logoff.
 *
 *   Revision 1.39  2004/06/29 22:03:30  aachinfiev
 *   Merge the changes for inventory & POS integration
 *
 *   Revision 1.38  2004/06/29 16:41:44  lwalters
 *   @scr 1665
 *
 *   Cancel was removing all items in the transaction.
 *   Changed flow to return to the ShowSaleScreen.
 *   Also see corresponding change in ItemLookupReturnShuttle
 *
 *   Revision 1.37  2004/06/23 14:54:57  awilliam
 *   @scr 5668 fix for cannot escape from cust options after entering alteration item
 *
 *   Revision 1.36  2004/06/21 13:15:36  dfierling
 *   @scr 5706 - adjusted flow for ExitPayment letter
 *
 *   Revision 1.35  2004/06/02 22:05:29  rsachdeva
 *   @scr 4670 Send: Multiple Sends Clean Up
 *
 *   Revision 1.34  2004/06/02 19:06:51  lzhao
 *   @scr 4670: add ability to delete send items, modify shipping and display shipping method.
 *
 *   Revision 1.33  2004/05/26 21:47:00  rsachdeva
 *   @scr 4670 Send: Multiple Sends
 *
 *   Revision 1.32  2004/05/13 19:38:40  jdeleau
 *   @scr 4862 Support timeout for all screens in the return item flow.
 *
 *   Revision 1.31  2004/05/05 18:44:53  jriggins
 *   @scr 4680 Moved Price Adjustment button from Sale to Pricing
 *
 *   Revision 1.30  2004/05/05 01:22:07  tfritz
 *   @scr 3888 Fixed the use case flow from inquiry
 *
 *   Revision 1.29  2004/04/29 22:25:16  jriggins
 *   @scr 3979 Added InvalidReadTransaction road for PriceAdjustmentStation
 *
 *   Revision 1.28  2004/04/27 21:29:32  jriggins
 *   @scr 3979 Added TransactionNotFoundPriceAdjustmentStation road for PriceAdjustmentStation
 *
 *   Revision 1.27  2004/04/26 15:42:34  awilliam
 *   @scr 4315 fix for Item size not validated
 *
 *   Revision 1.26  2004/04/13 15:23:47  tfritz
 *   @scr 3884 - More training mode changes
 *
 *   Revision 1.25  2004/04/07 17:50:55  tfritz
 *   @scr 3884 - Training Mode rework
 *
 *   Revision 1.24  2004/04/05 17:17:29  cdb
 *   @scr 0 Added missing letters.
 *
 *   Revision 1.23  2004/03/30 00:04:59  jriggins
 *   @scr 3979 Price Adjustment feature dev
 *
 *   Revision 1.22  2004/03/26 00:24:09  aarvesen
 *   @scr 0 updated tours to use the tourmap
 *
 *   Revision 1.21  2004/03/22 18:38:31  pkillick
 *   @scr 3981 -Changes made to AddItem branch, added an aisle and a road for Special Order errors.
 *
 *   Revision 1.20  2004/03/22 17:26:43  blj
 *   @scr 3872 - added redeem security, receipt printing and saving redeem transactions.
 *
 *   Revision 1.19  2004/03/19 21:14:59  pkillick
 *   @scr 4103 -Added laneaction="RemoveItemRoad" to SerializedItemUndo so that ESC does not add item to SaleScreen site.
 *
 *   Revision 1.18  2004/03/18 16:03:51  rsachdeva
 *   @scr 3906 Cancel Enter Size - does not cancel current transaction
 *
 *   Revision 1.17  2004/03/17 16:00:15  epd
 *   @scr 3561 Bug fixing and refactoring
 *
 *   Revision 1.16  2004/03/16 21:28:40  epd
 *   @scr 3561 Update to make sure Sale Cargo is reset after txn cancel
 *
 *   Revision 1.15  2004/03/16 18:42:43  cdb
 *   @scr 0 Removed tabs from all java source code.
 *
 *   Revision 1.14  2004/03/15 21:55:15  jdeleau
 *   @scr 4040 Automatic logoff after timeout
 *
 *   Revision 1.13  2004/03/14 21:45:46  tfritz
 *   @scr 3884 - Removed all training mode references
 *
 *   Revision 1.12  2004/03/14 21:15:28  tfritz
 *   @scr 3884 - New Training Mode Functionality
 *
 *   Revision 1.11  2004/03/12 16:26:09  baa
 *   @scr 3561 fix bugs with flow esc item size
 *
 *   Revision 1.10  2004/03/11 20:03:21  blj
 *   @scr 3871 - added/updated shuttles to/from redeem, to/from tender, to/from completesale.
 *   also updated sites cargo for new redeem transaction.
 *
 *   Revision 1.9  2004/03/05 16:34:26  jriggins
 *   @scr 3979 Price Adjustment additions
 *
 *   Revision 1.8  2004/02/26 04:42:59  blj
 *   @scr 0 - redeem services has moved to _360commerce.  Redeem will be an ADO service.
 *
 *   Revision 1.7  2004/02/20 22:47:32  bjosserand
 *   @scr 0 add Search letter
 *
 *   Revision 1.6  2004/02/20 21:15:41  aschenk
 *   @scr 2845: Added new road and traffic signals so user is not taken out of POS when they have entered information (zip, phone number) and slected esc.
 *
 *   Revision 1.5  2004/02/20 19:51:59  epd
 *   @scr 3561 Updates to prompt for item size if the item requires a size
 *
 *   Revision 1.4  2004/02/20 15:51:43  baa
 *   @scr 3561  size enhancements
 *
 *   Revision 1.3  2004/02/13 15:29:44  kll
 *   @scr 3829: flow control, send to ShowSaleScreen
 *
 *   Revision 1.2  2004/02/12 16:48:17  mcs
 *   Forcing head revision
 *
 *   Revision 1.1.1.1  2004/02/11 01:04:11  cschellenger
 *   updating to pvcs 360store-current
 * ===========================================================================
 */
-->
<!DOCTYPE SERVICE SYSTEM "classpath://oracle/retail/stores/foundation/tour/dtd/tourguide.dtd">

<SERVICE
    name="Sale"
    package="oracle.retail.stores.pos.services.sale"
    tourcam="ON">
    <COMMENT >
        Point-Of-Sale is the implementation of the Sale
        Package Requirements.
    </COMMENT>
    <CARGO  class="SaleCargo"/>
    <SERVICECODE >
        <LANEACTION class="CancelLetterAisle" package="oracle.retail.stores.pos.services.common"/>
        <LANEACTION class="CancelSelectedAisle"/>
        <LANEACTION class="CheckIfSizeRequiredAisle" package="oracle.retail.stores.pos.services.common"/>
        <LANEACTION class="DeleteItemRoad"/>
        <LANEACTION class="DisplayItemErrorAisle"/>
        <LANEACTION class="DisplayItemSizeDialogAisle" package="oracle.retail.stores.pos.services.common"/>
        <LANEACTION class="HideOnScreenKeyboardAisle" package="oracle.retail.stores.pos.services.common"/>
        <LANEACTION class="ItemAddedRoad"/>
        <LANEACTION class="ItemInfoEnteredAisle" package="oracle.retail.stores.pos.services.common"/>
        <LANEACTION class="ItemNumberEnteredAisle"/>
        <LANEACTION class="ModifyItemSelectedRoad"/>
        <LANEACTION class="MultipleQuantitySerialItemsNotAllowedAisle" package="oracle.retail.stores.pos.services.modifyitem.serialnumber"/>
        <LANEACTION class="RemoveItemRoad"/>
        <LANEACTION class="ResetItemSelectedRoad"/>
        <LANEACTION class="ValidateItemSizeAisle" package="oracle.retail.stores.pos.services.common"/>

        <LETTER name="ActivationCancelled"/>
        <LETTER name="Add"/>
        <LETTER name="Cancel"/>
        <LETTER name="ChangeShippingMethod"/>
        <LETTER name="Clear"/>
        <LETTER name="Continue"/>
        <LETTER name="Continue2"/>
        <LETTER name="Customer"/>
        <LETTER name="Delete"/>
        <LETTER name="Done"/>
        <LETTER name="Error"/>
        <LETTER name="Exit"/>
        <LETTER name="ExitCompleteSale"/>
        <LETTER name="ExitLayaway"/>
        <LETTER name="ExitPayment"/>
        <LETTER name="ExitSpecialOrder"/>
        <LETTER name="Failure"/>
        <LETTER name="GetSerialNumbers"/>
        <LETTER name="GiftCard"/>
        <LETTER name="GiftCardCert"/>
        <LETTER name="HideOnScreenKeyboard"/>
        <LETTER name="HouseAccount"/>
        <LETTER name="Invalid"/>
        <LETTER name="Item"/>
        <LETTER name="ItemInquiry" />
        <LETTER name="ItemsFound"/>
        <LETTER name="Logoff"/>
        <LETTER name="Manager"/>
        <LETTER name="Next"/>
        <LETTER name="NoSale"/>
        <LETTER name="NotValid"/>
        <LETTER name="Offline"/>
        <LETTER name="Ok"/>
        <LETTER name="Override"/>
        <LETTER name="Pos"/>
        <LETTER name="Pricing"/>
        <LETTER name="QueueFull"/>
        <LETTER name="Redeem"/>
        <LETTER name="ReprintReceipt"/>
        <LETTER name="Retry"/>
        <LETTER name="Return"/>
        <LETTER name="ReturnItem"/>
        <LETTER name="ScanSheet" />
        <LETTER name="Search"/>
        <LETTER name="Size"/>
        <LETTER name="Skip"/>
        <LETTER name="SpecialOrder"/>
        <LETTER name="Success"/>
        <LETTER name="SuspendedTransaction"/>
        <LETTER name="Tender"/>
        <LETTER name="TillFunctionsContinue"/>
        <LETTER name="TimeoutComplete">
            <COMMENT >
                Afer SaveCancelTransaction has completed for a
                transaction timeout, this letter is mailed to exit
                the service
            </COMMENT>
        </LETTER>
        <LETTER name="TooMany"/>
        <LETTER name="TrainingOn"/>
        <LETTER name="Transaction"/>
        <LETTER name="Undo"/>
        <LETTER name="UpdateShippingCharge"/>
        <LETTER name="Valid"/>
        <LETTER name="VoidedTransaction"/>

        <SHUTTLE class="CustomerLaunchShuttle"/>
        <SHUTTLE class="CustomerReturnShuttle"/>
        <SHUTTLE class="DisplaySendMethodLaunchShuttle"/>
        <SHUTTLE class="FinancialCargoShuttle" package="oracle.retail.stores.pos.services.common"/>
        <SHUTTLE class="GiftOptionsLaunchShuttle"/>
        <SHUTTLE class="GiftOptionsReturnShuttle"/>
        <SHUTTLE class="InstantCreditLaunchShuttle"/>
        <SHUTTLE class="InstantCreditReturnShuttle"/>
        <SHUTTLE class="ItemInquiryLaunchShuttle" />
        <SHUTTLE class="ItemInquiryReturnShuttle" />
        <SHUTTLE class="ItemLookupLaunchShuttle"/>
        <SHUTTLE class="ItemLookupReturnShuttle"/>
        <SHUTTLE class="ModifyItemLaunchShuttle"/>
        <SHUTTLE class="ModifyItemReturnShuttle"/>
        <SHUTTLE class="ModifyItemSerialNumberLaunchShuttle" package="oracle.retail.stores.pos.services.sale"/>
        <SHUTTLE class="ModifyItemSerialNumberReturnShuttle" package="oracle.retail.stores.pos.services.sale"/>
        <SHUTTLE class="ModifyTransactionLaunchShuttle"/>
        <SHUTTLE class="ModifyTransactionReturnShuttle"/>
        <SHUTTLE class="PricingLaunchShuttle"/>
        <SHUTTLE class="PricingReturnShuttle"/>
        <SHUTTLE class="RedeemLaunchShuttle"/>
        <SHUTTLE class="RedeemReturnShuttle"/>
        <SHUTTLE class="RelatedItemLaunchShuttle"/>
        <SHUTTLE class="ReprintReceiptLaunchShuttle"/>
        <SHUTTLE class="ReturnLaunchShuttle"/>
        <SHUTTLE class="ReturnReturnShuttle"/>
        <SHUTTLE class="ReverseTenderAuthLaunchShuttle"/>
        <SHUTTLE class="SaleLaunchShuttle"/>
        <SHUTTLE class="SaleReturnShuttle"/>
        <SHUTTLE class="ScanSheetLaunchShuttle" package="oracle.retail.stores.pos.services.sale.scansheet"/>
        <SHUTTLE class="ScanSheetReturnShuttle" package="oracle.retail.stores.pos.services.sale.scansheet"/>
        <SHUTTLE class="SecurityOverrideLaunchShuttle" package="oracle.retail.stores.pos.services.admin.security.common"/>
        <SHUTTLE class="SetupRegisterReturnShuttle"/>
        <SHUTTLE class="SetupRegisterShuttle"/>
        <SHUTTLE class="SpecialOrderLaunchShuttle"/>
        <SHUTTLE class="SpecialOrderReturnShuttle"/>
        <SHUTTLE class="TillFunctionLaunchShuttle"/>

        <SIGNAL  class="IsCustomerInfoSignal" package="oracle.retail.stores.pos.services.sale"/>
        <SIGNAL  class="IsLayawayTransactionSignal"/>
        <SIGNAL  class="IsNotCustomerInfoSignal" package="oracle.retail.stores.pos.services.sale"/>
        <SIGNAL  class="IsNotLayawayTransactionSignal"/>
        <SIGNAL  class="IsSpecialOrderTransactionSignal"/>
        <SIGNAL  class="IsTransactionCancelRequiredSignal"/>

        <SITEACTION class="AddItemSite"/>
        <SITEACTION class="CheckAccessSite" package="oracle.retail.stores.pos.services.admin.security.common"/>
        <SITEACTION class="CheckForQueueFullSite"/>
        <SITEACTION class="CheckForSendSite"/>
        <SITEACTION class="CheckForTrainingModeSite"/>
        <SITEACTION class="CheckRelatedItemDeletableSite"/>
        <SITEACTION class="CheckTransactionLevelSendAssignedSite"/>
        <SITEACTION class="EnterItemInfoSite" package="oracle.retail.stores.pos.services.common"/>
        <SITEACTION class="EnterItemSizeSite" package="oracle.retail.stores.pos.services.common"/>
        <SITEACTION class="PrintCancelTransactionSite" package="oracle.retail.stores.pos.services.common"/>
        <SITEACTION class="SaveCanceledTransactionSite" package="oracle.retail.stores.pos.services.common"/>
        <SITEACTION class="ShowSaleScreenSite"/>
        <SITEACTION class="StartSaleSite"/>
        <SITEACTION class="UpdateShippingChargeSite"/>
    </SERVICECODE>
    <MAP >
        <REGION  region="SERVICE" startsite="StartSale">
            <SITE name="StartSale" siteaction="StartSaleSite">
                <COMMENT>
                    This site checks to see if the system is configured
                    as POS.
                </COMMENT>
                <ROAD
                    name="SystemPOS"
                    letter="Pos"
                    destination="InitStation"
                    tape="DISCARD"
                    record="OFF"
                    index="ON">
                 <COMMENT>
                        This road is traveled when the system is configured
                        as POS.
                 </COMMENT>
                </ROAD>

            </SITE>
            <STATION
                name="InitStation"
                servicename="sale.initialize.initialize"
                targettier="APPLICATIONTIER"
                launchshuttle="SaleLaunchShuttle"
                returnshuttle="SaleReturnShuttle">
                <COMMENT >
                    Login Cashier, check access and get cashiers open
                    till
                </COMMENT>
                <ROAD
                    name="InitRegisterContinue"
                    letter="Continue"
                    destination="CheckForQueueFull"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InitRegisterFailed"
                    letter="Failure"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InitRegisterCancel"
                    letter="Cancel"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InitRegisterOffline"
                    letter="Offline"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InitRegisterTimeout"
                    letter="TimeoutComplete"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                 <COMMENT >
                        Timeout of Service
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="InitRegisterQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
            </STATION>
            <SITE  name="CheckForQueueFull" siteaction="CheckForQueueFullSite">
                <ROAD
                    name="CanWriteToQueue"
                    letter="Continue"
                    destination="CheckForTrainingMode"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="QueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
            </SITE>
            <STATION
                name="CompleteSaleStation"
                servicename="sale.complete.completesale"
                targettier="APPLICATIONTIER"
                launchshuttle="SaleLaunchShuttle"
                returnshuttle="SaleReturnShuttle">
                <ROAD
                    name="SaleCompleted"
                    letter="ExitCompleteSale"
                    destination="StartSale"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ActivationCancelled"
                    letter="ActivationCancelled"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="CompleteSaleQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="TimeoutInCompleteSaleStation"
                    letter="Timeout"
                    destination="SaveCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="ValidateSaleStation"
                servicename="sale.validate.validate"
                targettier="APPLICATIONTIER"
                launchshuttle="SaleLaunchShuttle"
                returnshuttle="SaleReturnShuttle">
                <ROAD
                    name="ValidationUndo"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ValidationError"
                    letter="Ok"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ValidationCancel"
                    letter="Cancel"
                    destination="InitStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                 <LIGHT  signal="IsNotLayawayTransactionSignal"/>
                </ROAD>
                <ROAD
                    name="ValidationCancelLayawayTransaction"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns with a Cancel letter.
                 </COMMENT>
                 <LIGHT  signal="IsLayawayTransactionSignal"/>
                </ROAD>
                <ROAD
                    name="ValidationFailed"
                    letter="Failure"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ValidationSucceded"
                    letter="Success"
                    destination="CompleteSaleStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ValidationSuccededLayawayExit"
                    letter="ExitLayaway"
                    destination="InitStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ValidateQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                      name="TimeoutValidateSaleStation"
                      letter="Timeout"
                      destination="SaveCancelTransaction"
                      tape="ADVANCE"
                      record="OFF"
                      index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="DemographicsStation"
                servicename="sale.demographic.demographic"
                targettier="APPLICATIONTIER"
                launchshuttle="SaleLaunchShuttle"
                returnshuttle="SaleReturnShuttle">
                <ROAD
                    name="DemographicsCollected"
                    letter="Success"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="DemographicsNotCollected"
                    letter="Continue"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="DemographicSkipped"
                    letter="Skip"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="UndoDemographics"
                    letter="Undo"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Leaves the service
                 </COMMENT>
                </ROAD>
            </STATION>
            <STATION name="InstantCreditStation" servicename="services.instantcredit.instantcredit"
               targettier="CURRENTTIER"
               launchshuttle="InstantCreditLaunchShuttle"
               returnshuttle="InstantCreditReturnShuttle">
               <ROAD name="InstantCreditReturnedContinue"
                     letter="Continue"
                     destination="ShowSaleScreen"
                     tape="ADVANCE"
                     record="OFF"
                     index="ON">
               </ROAD>
               <ROAD name="InstantCreditReturnedNext"
                     letter="Next"
                     destination="ShowSaleScreen"
                     tape="ADVANCE"
                     record="OFF"
                     index="ON">
               </ROAD>
               <ROAD name="NonTransactionEnrollment"
                        letter="Valid"
                        destination="ShowSaleScreen"
                        tape="ADVANCE"
                        record="OFF"
                        index="ON">
               </ROAD>
               <ROAD name="CancelInstantCredit"
                     letter="Cancel"
                     destination="ShowSaleScreen"
                     tape="ADVANCE"
                     record="OFF"
                     index="OFF">
               </ROAD>
               <ROAD name="InstantCreditExitPayment"
                     letter="ExitPayment"
                     destination="InitStation"
                     tape="ADVANCE"
                     record="OFF"
                     index="ON">
               </ROAD>
               <ROAD name="UndoInstantCredit"
                     letter="Undo"
                     destination="ShowSaleScreen"
                     tape="ADVANCE"
                     record="OFF"
                     index="OFF">
               </ROAD>
               <ROAD name="InstantCreditFailure"
                     letter="Failure"
                     destination="ShowSaleScreen"
                     tape="ADVANCE"
                     record="OFF"
                     index="ON">
               </ROAD>
               <ROAD name="InstantCreditOffline"
                     letter="Offline"
                     destination="ShowSaleScreen"
                     tape="ADVANCE"
                     record="OFF"
                     index="ON">
               </ROAD>
               <ROAD
                     name="TimeoutInstantCreditStation"
                     letter="Timeout"
                     destination="SaveCancelTransaction"
                     tape="ADVANCE"
                     record="OFF"
                     index="OFF">
               </ROAD>
               <ROAD
                    name="InstantCreditQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="RedeemStation"
                servicename="services.redeem.redeem"
                targettier="CURRENTTIER"
                launchshuttle="RedeemLaunchShuttle"
                returnshuttle="RedeemReturnShuttle">

                <ROAD
                    name="RedeemComplete"
                    letter="Continue"
                    destination="InitStation"
                    tape="DISCARD"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoRedeem"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelRedeem"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="FailureRedeem"
                    letter="Failure"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="QueueFullRedeem"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <SITE  name="ShowSaleScreen" siteaction="ShowSaleScreenSite">
                <COMMENT >
                    This site displays the SELL_ITEM screen.
                </COMMENT>
                <AISLE
                    name="CancelSelected"
                    letter="Cancel"
                    laneaction="CancelSelectedAisle">
                 <COMMENT >
                        Traversed when cancel is selected.
                 </COMMENT>
                </AISLE>
                <AISLE
                    name="ItemNumberEntered"
                    letter="Next"
                    laneaction="ItemNumberEnteredAisle">
                 <COMMENT >
                        This aisle is traveled when an item number has been
                        entered and is not empty.
                 </COMMENT>
                </AISLE>
                <AISLE
                    name="HideOnScreenKeyboard"
                    letter="HideOnScreenKeyboard"
                    laneaction="HideOnScreenKeyboardAisle">
                 <COMMENT >
                        This aisle hides the on screen keyboard if the trans has just started.
                 </COMMENT>
                </AISLE>
                <ROAD
                    name="ClearSelected"
                    letter="Clear"
                    destination="CheckRelatedItemDeletable"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This aisle is traversed when the user presses the
                        Clear key from the SELL_ITEM screen. The system will check for
                        send item before delete
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ValidItemNumberEntered"
                    letter="Valid"
                    destination="ItemLookupStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT>
                        This road is traveled when the item number
                        entered has been validated.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="TenderSelected"
                    letter="Tender"
                    destination="ValidateSaleStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the user presses the Tender
                        key.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyTransactionSelected"
                    letter="Transaction"
                    destination="ModifyTransactionStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the user presses the Transaction
                        key.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CustomerSelected"
                    letter="Customer"
                    destination="CustomerStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Road to traverse when the user presses the Customer
                        button.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ReturnSelected"
                    letter="Return"
                    destination="ReturnStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed when the user selects Return
                        off the menu.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoSelected"
                    letter="Undo"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Leaves the service
                 </COMMENT>
                 <LIGHT  signal="IsNotCustomerInfoSignal"/>

                </ROAD>
                <ROAD
                    name="NoSaleSelected"
                    letter="NoSale"
                    destination="NoSaleStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the user presses the No
                        Sale key.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="SaleScreenError"
                    letter="Ok"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when an error is encountered
                        during sale time.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ManagerSelected"
                    letter="Manager"
                    destination="ManagerStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="ReprintReceiptSelected"
                    letter="ReprintReceipt"
                    destination="ReprintReceiptStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="HouseAccountSelected"
                    letter="HouseAccount"
                    destination="InstantCreditStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="RedeemSelected"
                    letter="Redeem"
                    destination="RedeemStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="TillFunctionsSelected"
                    letter="TillFunctionsContinue"
                    destination="TillFunctionStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="SpecialOrderSelected"
                    letter="SpecialOrder"
                    destination="SpecialOrderStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="PricingSelected"
                    letter="Pricing"
                    laneaction="ModifyItemSelectedRoad"
                    destination="PricingStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road travels to the pricing station after the
                        user has selected pricing.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="GiftCardCertSelected"
                    letter="GiftCardCert"
                    destination="GiftOptionsStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelSale"
                    letter="Override"
                    destination="CheckAccess"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                 <COMMENT>
                        This road is traveled when the user presses the Cancel
                        key from the SELL_ITEM screen.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifiedItemSelected"
                    letter="Item"
                    laneaction="ModifyItemSelectedRoad"
                    destination="ModifyItemStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="UndoWithCustomerInfoSelected"
                    letter="Undo"
                    destination="DemographicsStation"
                    tape="ADVANCE"
                    record="ON"
                    index="ON">
                 <LIGHT  signal="IsCustomerInfoSignal"/>
                </ROAD>
                <ROAD
                    name="CancelTransactionOnTimeout"
                    letter="Timeout"
                    destination="SaveCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ItemInquirySelected"
                    letter="ItemInquiry"
                    destination="ItemInquiryStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ScanSheetSelected"
                    letter="ScanSheet"
                    destination="ScanSheetStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="CheckAccess" siteaction="CheckAccessSite">
                <ROAD
                    name="OverrideRequired"
                    letter="Override"
                    destination="SecurityOverrideStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelTransactionAccessGranted"
                    letter="Continue"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE  name="CheckForTrainingMode" siteaction="CheckForTrainingModeSite">
                <ROAD
                    name="SetupTrainingModeRegisterRequired"
                    letter="TrainingOn"
                    destination="SetupRegisterStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="NotInTrainingMode"
                    letter="Continue"
                    destination="DemographicsStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE name="CheckRelatedItemDeletable" siteaction="CheckRelatedItemDeletableSite">
                <ROAD
                    name="RelatedItemDeleteAllowed"
                    letter="Continue"
                    destination="CheckForSend"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="RelatedItemDeleteFailure"
                    letter="Failure"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE name="CheckForSend" siteaction="CheckForSendSite">
                <ROAD
                    name="UpdateShippingSelected"
                    letter="UpdateShippingCharge"
                    destination="CheckTransactionLevelSendAssigned"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This aisle is traversed when pass from CheckForSend
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="FailureDeleteSend"
                    letter="Failure"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Not allow to delete items from multiple sends.
                 </COMMENT>
                </ROAD>
            </SITE>
            <SITE name="CheckTransactionLevelSendAssigned" siteaction="CheckTransactionLevelSendAssignedSite">
                <ROAD
                    name="UpdateShippingSelected"
                    letter="Next"
                    destination="UpdateShippingCharge"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This aisle is traversed when pass from CheckForSend
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="DeleteSelected"
                    letter="Continue"
                    laneaction="DeleteItemRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <SITE name="UpdateShippingCharge" siteaction="UpdateShippingChargeSite">
                <ROAD
                    name="DeleteSelected"
                    letter="Delete"
                    laneaction="DeleteItemRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        No need to change shipping method if not send item, or remove
                        all the items from a send.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ChangeShippingMethodSelected"
                    letter="ChangeShippingMethod"
                    laneaction="DeleteItemRoad"
                    destination="DisplaySendMethodStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        need to change shipping method, if part of items in a send are
                        deleted.
                 </COMMENT>
                </ROAD>
            </SITE>

            <STATION
                name="ItemInquiryStation"
                servicename="inquiry.iteminquiry.ItemInquiry"
                targettier="APPLICATIONTIER"
                launchshuttle="ItemInquiryLaunchShuttle"
                returnshuttle="ItemInquiryReturnShuttle">
                <COMMENT >
                   Includes Advanced Item Search
                </COMMENT>
                <AISLE
                    name="CheckForSizeRequired"
                    letter="Add"
                    laneaction="CheckIfSizeRequiredAisle">
                </AISLE>
                <ROAD
                    name="EnterSize"
                    letter="Size"
                    destination="EnterItemSize"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InquiryDone"
                    letter="Next"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InquiryCancelled"
                    letter="Cancel"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                 <LIGHT  signal="IsTransactionCancelRequiredSignal" negate="Y"/>
                </ROAD>
                <ROAD
                    name="InquiryCancelTransaction"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <LIGHT  signal="IsTransactionCancelRequiredSignal"/>
                </ROAD>
                <ROAD
                    name="UndoInquiry"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InquiryInvalid "
                    letter="Invalid"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ItemAdd"
                    letter="Continue2"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
            </STATION>
            <STATION
                name="SetupRegisterStation"
                servicename="dailyoperations.common.setupregister"
                targettier="CURRENTTIER"
                launchshuttle="SetupRegisterShuttle"
                returnshuttle="SetupRegisterReturnShuttle">
                <ROAD
                    name="LookupStoreStatusExit"
                    letter="Failure"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Aisle to traverse when there is a database or other
                        unexpected error on the store-status lookup. Because
                        the hard totals do not contain the business date,
                        the service exits.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="Exit"
                    letter="Ok"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Road to traverse when no register parameter is found.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="LookupRegisterContinue"
                    letter="Continue"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Road to traverse when a register lookup is complete.
                 </COMMENT>
                </ROAD>
            </STATION>
            <STATION
                name="SecurityOverrideStation"
                servicename="security.override.override"
                targettier="CURRENTTIER"
                launchshuttle="SecurityOverrideLaunchShuttle">
                <ROAD
                    name="CancelTransactionSecurityOverrideSucceeded"
                    letter="Success"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelTransactionSecurityOverrideFailed"
                    letter="Failure"
                    destination="LastIndexed"
                    tape="SPLICE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="PricingStation"
                servicename="services.pricing.pricing"
                targettier="CURRENTTIER"
                launchshuttle="PricingLaunchShuttle"
                returnshuttle="PricingReturnShuttle">
                <COMMENT >
                    This station starts the pricing service
                </COMMENT>
                <ROAD
                    name="PricingUndo"
                    letter="Undo"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed when escape has been pressed
                        from the pricing options screen.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="PricingComplete"
                    letter="Next"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the pricing service is
                        returns succesfully
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="PricingUndone"
                    letter="Undo"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the pricing service is
                        undone.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="PricingCanceled"
                    letter="Cancel"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the pricing service is
                        cancled.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ContinuePriceAdjustment"
                    letter="Continue"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road goes to the Show Sale Screen.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="FailurePriceAdjustment"
                    letter="Failure"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed in a Failure letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ExitPriceAdjustment"
                    letter="Exit"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed in a Exit letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="OkLetterPriceAdjustment"
                    letter="Ok"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed in a Ok letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="SuccessPriceAdjustment"
                    letter="Success"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed in a Success letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ItemsFoundPriceAdjustment"
                    letter="ItemsFound"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed in a ItemsFound letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="TransactionNotFoundPriceAdjustment"
                    letter="ReturnItem"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed in a ReturnItem letter when no transaction is found.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="InvalidReadTransaction"
                    letter="Invalid"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Transaction read is invalid for return such as house
                        account payment transaction.
                 </COMMENT>
                </ROAD>
                <ROAD
                     name="TimeoutPricingStation"
                     letter="Timeout"
                     destination="SaveCancelTransaction"
                     tape="ADVANCE"
                     record="OFF"
                     index="OFF">
               </ROAD>
            </STATION>
            <STATION
                name="TillFunctionStation"
                servicename="till.tilloptions.tilloptions"
                targettier="CURRENTTIER"
                launchshuttle="TillFunctionLaunchShuttle"
                returnshuttle="FinancialCargoShuttle">
                <COMMENT >
                    This station is the transfer point for the till service.
                </COMMENT>
                <AISLE
                    name="TillFunctionFailure"
                    letter="Failure"
                    laneaction="CancelLetterAisle">
                 <COMMENT >
                        This aisle is traversed to convert the current letter
                        to cancel
                 </COMMENT>
                </AISLE>
                <AISLE
                    name="TillFunctionUndo"
                    letter="Undo"
                    laneaction="CancelLetterAisle">
                 <COMMENT >
                        This aisle is traversed to convert the current letter
                        to cancel
                 </COMMENT>
                </AISLE>
                <ROAD
                    name="TillFunctionCancel"
                    letter="Cancel"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Till Function service
                        returns.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="TillFunctionSuccess"
                    letter="Success"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Till Function service
                        returns with a Success letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="TillFunctionLogoff"
                    letter="Logoff"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Till Function service
                        returns with a Logoff letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                     name="TimeoutTillFunctionStation"
                     letter="Timeout"
                     destination="SaveCancelTransaction"
                     tape="ADVANCE"
                     record="OFF"
                     index="OFF">
               </ROAD>
               <ROAD
                    name="TillFunctionsQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <SITE  name="PrintCancelTransaction" siteaction="PrintCancelTransactionSite">
                <COMMENT >
                    This site prints the canceled transaction receipt.
                </COMMENT>
                <ROAD
                    name="CancelTransactionReceiptPrinted"
                    letter="Continue"
                    destination="SaveCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed when the cancel transaction receipt
                        is successfully printed or when the printer is offline
                        and the operator selects continue.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="PrintCancelTransactionRetry"
                    letter="Retry"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed when the printer is offline
                        and the operator selects retry.
                 </COMMENT>
                </ROAD>
                <ROAD
                   name="PrintCancelTransactionTimeout"
                   letter="Timeout"
                   destination="InitStation"
                   tape="ADVANCE"
                   record="OFF"
                   index="OFF">
                <COMMENT >
                       Afer Printing Cancel Transaction for a transaction timeout,
                       this letter is mailed to return to main log in screen
                </COMMENT>
               </ROAD>
            </SITE>
            <SITE  name="SaveCancelTransaction" siteaction="SaveCanceledTransactionSite">
                <COMMENT >
                    This site saves the current canceled transaction.
                </COMMENT>
                <ROAD
                    name="TransactionCanceled"
                    letter="Continue"
                    destination="InitStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="TransactionCanceledTimeout"
                    letter="Timeout"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT>
                       When Transaction timeout happens this letter
                       is mailed to print cancelled transaction receipt.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="TransactionCanceledRetry"
                    letter="Retry"
                    destination="SaveCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="TransactionCanceledQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <STATION
                name="ReprintReceiptStation"
                servicename="services.reprintreceipt.reprintreceipt"
                targettier="CURRENTTIER"
                launchshuttle="ReprintReceiptLaunchShuttle">
                <COMMENT >
                    This station is the transfer point for the reprint
                    receipt.
                </COMMENT>
                <ROAD
                    name="ReprintReceiptReturned"
                    letter="Next"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Reprint Receipt service
                        returns.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CancelReprintReceipt"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Reprint Receipt service
                        returns with a Cancel letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoReprintReceipt"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Reprint Receipt service
                        returns with an Undo letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="FailureReprintReceipt"
                    letter="Failure"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Reprint Receipt service
                        returns with a Failure letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="SuccessReprintReceipt"
                    letter="Success"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Reprint Receipt service
                        returns with a Success letter.
                 </COMMENT>
                </ROAD>
            </STATION>
            <STATION
                name="NoSaleStation"
                servicename="services.nosale.nosale"
                targettier="CURRENTTIER"
                launchshuttle="FinancialCargoShuttle"
                returnshuttle="FinancialCargoShuttle">
                <COMMENT >
                    This station is the launch point for the No Sale service.
                </COMMENT>
                <ROAD
                    name="CancelNoSale"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the No Sale service returns
                        with a Cancel letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="FailureNoSale"
                    letter="Failure"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the No Sale service returns
                        with a Failure letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoNoSale"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the No Sale service returns
                        with an Undo letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="NoSaleReturned"
                    letter="Next"
                    destination="InitStation"
                    tape="DISCARD"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="NoSaleQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="ModifyTransactionStation"
                servicename="services.modifytransaction.ModifyTransaction"
                targettier="CURRENTTIER"
                launchshuttle="ModifyTransactionLaunchShuttle"
                returnshuttle="ModifyTransactionReturnShuttle">
                <COMMENT >
                    This station is the launch point for the Modify Transaction
                    service.
                </COMMENT>
                <ROAD
                    name="ModifyTransactionReturnedFromTaxExemptNotAllowed"
                    letter="Ok"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns due to the tax exempt not allowed.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyTransactionReturned"
                    letter="Next"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CancelModifyTransaction"
                    letter="Cancel"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns with a Cancel letter.
                 </COMMENT>
                 <LIGHT  signal="IsNotLayawayTransactionSignal"/>
                </ROAD>
                <ROAD
                    name="CancelLayawayTransaction"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns with a Cancel letter.
                 </COMMENT>
                 <LIGHT  signal="IsLayawayTransactionSignal"/>
                </ROAD>
                <ROAD
                    name="UndoModifyTransaction"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns with an Undo letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="FailureModifyTransaction"
                    letter="Failure"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns with a Failure letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="SuccessModifyTransaction"
                    letter="Success"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns with a Success letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                      name="LayawayExitFromModifyTransaction"
                       letter="ExitLayaway"
                    destination="InitStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                      This road is traveled when the Modify Transaction
                      service returns with a ExitLayaway letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="TransactionVoided"
                    letter="VoidedTransaction"
                    destination="InitStation"
                    tape="DISCARD"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="TransactionSuspended"
                    letter="SuspendedTransaction"
                    destination="InitStation"
                    tape="DISCARD"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="TransactionLevelSend"
                    letter="Done"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with a Done letter from sendmain service.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="TransactionQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelSpecialOrderTransaction"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Transaction
                        service returns with a Cancel letter.
                 </COMMENT>
                 <LIGHT  signal="IsSpecialOrderTransactionSignal"/>
                </ROAD>
                <ROAD
                    name="ExitSpecialOrder"
                    letter="ExitSpecialOrder"
                    destination="InitStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                 <COMMENT >
                        Explicitly exit special order processing to ensure sale init occurs.
                        This should occur whenever a tranaction occurs.
                        This check for workstation accountability and will logout the operator if appropriate.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="BillPaymnentSuccessFull"
                    letter="ExitCompleteSale"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                 <COMMENT >
                        Bill Payment Successful
                 </COMMENT>
                </ROAD>
                <ROAD
                     name="TimeoutModifyTransactionStation"
                     letter="Timeout"
                     destination="SaveCancelTransaction"
                     tape="ADVANCE"
                     record="OFF"
                     index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="CustomerStation"
                servicename="customer.main.customermain"
                targettier="CURRENTTIER"
                launchshuttle="CustomerLaunchShuttle"
                returnshuttle="CustomerReturnShuttle">
                <COMMENT >
                    Transfer control to customer services to execute
                    Customer functionality.
                </COMMENT>
                <ROAD
                    name="CustomerContinue"
                    letter="Continue"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Road to traverse when the Customer service runs to
                        completion.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CustomerUndo"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Road to traverse when the user backs out of the Customer
                        service.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CustomerCancel"
                    letter="Cancel"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Road to traverse when the user Cancels out of the Customer
                        service.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CustomerLink"
                    letter="Link"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT>
                        Road to traverse when the user link of the Customer
                        service.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CustomerOffline"
                    letter="Offline"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Road to traverse when the user Customer service is
                        offline
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CustomerTimeout"
                    letter="Timeout"
                    destination="SaveCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>

             <STATION
                 name="SerializedItemStation"
                 servicename="modifyitem.serialnumber.serializedItem"
                 targettier="CURRENTTIER"
                 launchshuttle="ModifyItemSerialNumberLaunchShuttle"
                 returnshuttle="ModifyItemSerialNumberReturnShuttle">
                <COMMENT>
                     This service prompts the user for serial number input and sets the serial number attribute
                     for one or more line items.
                </COMMENT>
                <ROAD
                     name="SerializedItemUndo"
                     laneaction="RemoveItemRoad"
                     letter="Undo"
                     destination="ShowSaleScreen">
                </ROAD>
                <ROAD
                     name="SerializedItemCancel"
                     laneaction="RemoveItemRoad"
                     letter="Cancel"
                     destination="ShowSaleScreen">
                </ROAD>
                <ROAD
                     name="DuplicateItems"
                     laneaction="RemoveItemRoad"
                     letter="Error"
                     destination="ShowSaleScreen">
                </ROAD>
                <ROAD
                     name="SerialNumbersEntered"
                     letter="Ok"
                     laneaction="ItemAddedRoad"
                     destination="RelatedItemStation">
                </ROAD>
                <ROAD
                     name="SellableRoad"
                     letter="Sellable"
                     laneaction="ItemAddedRoad"
                     destination="RelatedItemStation">
                </ROAD>
                <ROAD
                     name="pickupDeliveryRoad"
                     letter="Continue"
                     laneaction="ItemAddedRoad"
                     destination="RelatedItemStation">
                </ROAD>
                <ROAD name="UINSuccessRoad"
                     letter="Success"
                     laneaction="ItemAddedRoad"
                     destination="RelatedItemStation">
                </ROAD>
            </STATION>

            <STATION
                name="ModifyItemStation"
                servicename="services.modifyitem.modifyitem"
                targettier="CURRENTTIER"
                launchshuttle="ModifyItemLaunchShuttle"
                returnshuttle="ModifyItemReturnShuttle">
                <COMMENT >
                    This station is the launch point for the Modify Item
                    service.
                </COMMENT>
                <ROAD
                    name="UndoModifyItem"
                    letter="Undo"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with an Undo letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ClearModifyItem"
                    letter="Clear"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        Use this road to respond to the Clear key and return
                        to the ShowSaleScreen site. returns with an Undo
                        letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyItemReturned"
                    letter="Next"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="REWIND"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns normally. This road rewinds the tape since a
                        constant repetition of ModifiedItemSelected road then
                        ModifyItemReturned road will result in memory leak in
                        the Tape.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="CancelModifyItem"
                    letter="Cancel"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with a Cancel letter.
                 </COMMENT>
                 <LIGHT  signal="IsTransactionCancelRequiredSignal" negate="Y"/>
                </ROAD>
                <ROAD
                    name="CancelModifyItemTransaction"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with a Cancel letter and there is a transaction
                        that should be canceled.
                 </COMMENT>
                 <LIGHT  signal="IsTransactionCancelRequiredSignal"/>
                </ROAD>
                <ROAD
                    name="FailureModifyItem"
                    letter="Failure"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with a Failure letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyItemAdded"
                    letter="Add"
                    laneaction="ResetItemSelectedRoad"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with an Add letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyItemOk"
                    letter="Ok"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with an Ok letter from an error dialog screen.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyItemContinue"
                    letter="Continue"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with a Continue letter from sendmain service.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyItemSendDone"
                    letter="Done"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with a Done letter from sendmain service.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyItemSuccess"
                    letter="Success"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Modify Item service
                        returns with a Success letter from sendmain service.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ModifyItemInvalid"
                    letter="Invalid"
                    laneaction="ResetItemSelectedRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="ReturnStation"
                servicename="returns.returnoptions.returnoptions"
                targettier="CURRENTTIER"
                launchshuttle="ReturnLaunchShuttle"
                returnshuttle="ReturnReturnShuttle">
                <COMMENT >
                    This station goes to the Return service.
                </COMMENT>
                <ROAD
                    name="CancelReturnStation"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road goes to create a new transaction.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ContinueReturnStation"
                    letter="Continue"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road goes to the Show Sale Screen.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoReturnStation"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road goes to the ShowSaleScreen.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="FailureReturnStation"
                    letter="Failure"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed in a Success letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="SuccessReturnStation"
                    letter="Success"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traversed in a Success letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="TimeoutReturnStation"
                    letter="Timeout"
                    destination="SaveCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road goes to the ShowSaleScreen, after a return was timed out.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ReturnOptionsQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="ManagerStation"
                servicename="services.manager.manager"
                targettier="APPLICATIONTIER"
                launchshuttle="FinancialCargoShuttle">
                <ROAD
                    name="CancelSelected"
                    letter="Cancel"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoSelected"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>

            <STATION
                name="GiftOptionsStation"
                servicename="services.giftoptions.giftoptions"
                targettier="APPLICATIONTIER"
                launchshuttle="GiftOptionsLaunchShuttle"
                returnshuttle="GiftOptionsReturnShuttle">
                <ROAD
                    name="AddGiftCardItem"
                    letter="Continue"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoGiftCardOptionsSelected"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="GiftCardOptionsCompleted"
                    letter="Success"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelGiftCardOptionsSelected"
                    letter="Cancel"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <SITE  name="EnterItemSize" siteaction="EnterItemSizeSite">
                <AISLE
                    name="ValidateItemSize"
                    letter="Next"
                    laneaction="ValidateItemSizeAisle">
                </AISLE>
                <AISLE
                    name="DisplayItemSizeDialog"
                    letter="Invalid"
                    laneaction="DisplayItemSizeDialogAisle">
                </AISLE>
                <ROAD
                    name="ItemSizeReenter"
                    letter="Ok"
                    destination="EnterItemSize"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="AddItemRoad"
                    letter="Search"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelEnterItemSize"
                    laneaction="RemoveItemRoad"
                    letter="Cancel"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoEnterItemSize"
                    laneaction="RemoveItemRoad"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </SITE>
            <STATION
                name="SpecialOrderStation"
                servicename="services.specialorder.specialorder"
                targettier="CURRENTTIER"
                launchshuttle="SpecialOrderLaunchShuttle"
                returnshuttle="SpecialOrderReturnShuttle">
                <COMMENT >
                    This station is the transfer point for the special
                    order service.
                </COMMENT>
                <AISLE
                    name="SpecialOrderFailure"
                    letter="Failure"
                    laneaction="CancelLetterAisle">
                 <COMMENT >
                        This aisle is traversed to convert the current letter
                        to cancel
                 </COMMENT>
                </AISLE>
                <ROAD
                    name="SpecialOrderSuccess"
                    letter="Success"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the special order service
                        returns with a Success letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="SpecialOrderUndo"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the special order service
                        returns with a Undo letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="SpecialOrderCancel"
                    letter="Cancel"
                    destination="PrintCancelTransaction"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Till Function service
                        returns.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="SpecialOrderQueueFull"
                    letter="QueueFull"
                    destination="Final"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
            </STATION>
            <STATION
                name="ItemLookupStation"
                servicename="iteminquiry.itemlookup.itemlookup"
                targettier="APPLICATIONTIER"
                launchshuttle="ItemLookupLaunchShuttle"
                returnshuttle="ItemLookupReturnShuttle">
                <COMMENT >
                    Includes item lookup, checking if item is valid for
                    transaction and adding item to transaction
                </COMMENT>
                <AISLE
                    name="CheckForSizeRequired"
                    letter="Continue"
                    laneaction="CheckIfSizeRequiredAisle">
                </AISLE>
                <ROAD
                    name="EnterSize"
                    letter="Size"
                    destination="EnterItemSize"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ItemAdd"
                    letter="Continue2"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="InvalidItemNumberEntered"
                    letter="Invalid"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ItemNotAllowedWithMultipleQuantity"
                    letter="Ok"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ItemNotFound"
                    letter="Retry"
                    destination="EnterItemInfo"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="CancelItemLookup"
                    letter="Cancel"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Reprint Receipt service
                        returns with a Cancel letter.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="UndoItemLookup"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the Reprint Receipt service
                        returns with an Undo letter.
                 </COMMENT>
                </ROAD>

                <ROAD
                    name="ItemGiftCard"
                    letter="GiftCard"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>

                <ROAD
                    name="ErrorFromUINLookup"
                    letter="Error"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the UIN Enetered does not
                        return any items associated with it.
                 </COMMENT>
                </ROAD>
<!-- Dead road?
                <ROAD
                    name="CheckItemTypeCompleted"
                    letter="Next"
                    destination="AddItem"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
-->
            </STATION>
            <SITE  name="EnterItemInfo" siteaction="EnterItemInfoSite">
                <COMMENT >
                    This site displays the ITEM_NOT_FOUND form to allow
                    the user to enter the required information for the
                    item.
                </COMMENT>
                <AISLE
                    name="ItemInfoEntered"
                    letter="Next"
                    laneaction="ItemInfoEnteredAisle">
                 <COMMENT >
                        This aisle is traversed after the user entered the
                        item information. It adds the item to the item list
                        in the cargo.
                 </COMMENT>
                </AISLE>
                <AISLE
                    name="CancelSelected"
                    letter="Cancel"
                    laneaction="CancelSelectedAisle">
                 <COMMENT >
                        Traversed when cancel is selected.
                 </COMMENT>
                </AISLE>
                <ROAD
                    name="NewItemAdded"
                    letter="Continue"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the new item information
                        has been stored in the cargo.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ValidationErrorOkEnterReturnItemInformation"
                    letter="Ok"
                    destination="EnterItemInfo"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="UndoItem"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when the user presses the Undo
                        key in the ITEM_NOT_FOUND form.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="InvalidItem"
                    letter="Invalid"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="CancelEnterItem"
                    letter="Override"
                    destination="CheckAccess"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                 <COMMENT >
                        This road is traveled when the user presses the Cancel
                        key from the EnterItemInfo screen.
                 </COMMENT>
                </ROAD>
            </SITE>
            <SITE  name="AddItem" siteaction="AddItemSite">
                <AISLE
                    name="MultipleQuantitySerialItemsNotAllowed"
                    letter="TooMany"
                    laneaction="MultipleQuantitySerialItemsNotAllowedAisle">
                </AISLE>
                <AISLE
                    name="SpecialOrder"
                    letter="NotValid"
                    laneaction="DisplayItemErrorAisle">
                 <COMMENT >
                        Special order state active and item is not valid
                 </COMMENT>
                </AISLE>
                <ROAD
                    name="ItemAdded"
                    letter="Continue"
                    laneaction="ItemAddedRoad"
                    destination="RelatedItemStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="GetSerialNumbers"
                    letter="GetSerialNumbers"
                    destination="SerializedItemStation"
                    tape="ADVANCE"
                    record="ON"
                    index="ON">
                </ROAD>
                <ROAD
                    name="SpecialOrderNotEligible"
                    letter="Invalid"
                    laneaction="RemoveItemRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="ON"
                    index="ON">
                </ROAD>
                <ROAD
                    name="MultipleQuantityDialogConfirmed"
                    letter="Ok"
                    laneaction="RemoveItemRoad"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="ON"
                    index="ON">
                </ROAD>
            </SITE>
            <STATION
                name="DisplaySendMethodStation"
                servicename="send.displaysendmethod.displaysendmethod"
                targettier="CURRENTTIER"
                launchshuttle="DisplaySendMethodLaunchShuttle">
                <COMMENT>
                    This station goes to the display send method station for updating
                    shipping method.
                </COMMENT>
                <ROAD
                    name="DoneSelectedRoad"
                    letter="Done"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                 <COMMENT>
                        This road is traversed when a Done letter is received
                 </COMMENT>
                </ROAD>
            </STATION>
            <STATION
                name="RelatedItemStation"
                servicename="sale.relateditem.relateditem"
                targettier="CURRENTTIER"
                launchshuttle="RelatedItemLaunchShuttle">
                <COMMENT>
                    This station goes to the related item services to add all
                    related items.
                </COMMENT>
                <ROAD
                    name="RelatedItemsAdded"
                    letter="Done"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="RelatedItemsCancel"
                    letter="Override"
                    destination="CheckAccess"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
                <ROAD
                    name="RelatedItemsUndo"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="ON">
                </ROAD>
            </STATION>
            <STATION name="ReverseTenderStation"
                servicename="tender.reversal.reversal"
                targettier="CURRENTTIER"
                launchshuttle="ReverseTenderAuthLaunchShuttle">
                <ROAD
                    name="TendersAuthorizeReversedRoad"
                    letter="Success"
                    destination="SaveCancelTransaction"
                    tape="ADVANCE"
                    record="ON"
                    index="ON">
                </ROAD>
                <ROAD
                    name="ReverseTenderCompleted"
                    letter="ActivationCancelled"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="ON"
                    index="ON">
                </ROAD>
            </STATION>
            <STATION
                name="ScanSheetStation"
                servicename="sale.scansheet.scansheet"
                targettier="CURRENTTIER"
                launchshuttle="ScanSheetLaunchShuttle"
                returnshuttle="ScanSheetReturnShuttle">                
                <AISLE
                    name="ScanSheetNext"
                    letter="Next"
                    laneaction="ItemNumberEnteredAisle">
                </AISLE>
                <ROAD
                    name="ScanSheetUndo"
                    letter="Undo"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                </ROAD>
                <ROAD
                    name="ValidItemNumberEntered"
                    letter="Valid"
                    destination="ItemLookupStation"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT>
                        This road is traveled when the item number
                        entered has been validated.
                 </COMMENT>
                </ROAD>
                <ROAD
                    name="ItemNumberEnteredError"
                    letter="Ok"
                    destination="ShowSaleScreen"
                    tape="ADVANCE"
                    record="OFF"
                    index="OFF">
                 <COMMENT >
                        This road is traveled when an error is encountered
                        during sale time.
                 </COMMENT>
                </ROAD>
            </STATION>
            <SYSTEMSITE  name="Final" action="RETURN"/>
            <SYSTEMSITE  name="LastIndexed" action="BACKUP"/>
            <SYSTEMSITE  name="NamedIndex" action="BACKUP"/>
        </REGION>
    </MAP>
</SERVICE>
